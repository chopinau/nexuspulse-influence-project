(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61],{314:function(e,t,n){Promise.resolve().then(n.bind(n,9555)),Promise.resolve().then(n.bind(n,5680)),Promise.resolve().then(n.bind(n,8503)),Promise.resolve().then(n.bind(n,1087)),Promise.resolve().then(n.bind(n,5905)),Promise.resolve().then(n.bind(n,9441))},1152:function(e,t,n){"use strict";n.d(t,{AppProvider:function(){return i},b:function(){return o}});var r=n(7437),a=n(2265);let s=(0,a.createContext)(null);function i(e){let{children:t}=e,[n,i]=(0,a.useState)("en"),[o,l]=(0,a.useState)("/");return(0,r.jsx)(s.Provider,{value:{locale:n,setLocale:i,pathname:o,setPathname:l},children:t})}let o=()=>{let e=(0,a.useContext)(s);if(!e)throw Error("useAppContext must be used within AppProvider");return e}},9555:function(e,t,n){"use strict";n.d(t,{default:function(){return s}});var r=n(7437),a=n(7590);function s(e){let{children:t,className:n="",delay:s=0}=e;return(0,r.jsxs)(a.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:s},whileHover:{scale:1.05,boxShadow:"0 0 25px rgba(0, 243, 255, 0.2)"},className:"relative overflow-hidden bg-cyber-panel backdrop-blur-xl border border-white/10 rounded-2xl p-6 shadow-xl transition-colors hover:border-cyber-neon/30 ".concat(n),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-cyber-neon/5 to-cyber-purple/5 pointer-events-none"}),(0,r.jsx)("div",{className:"relative z-10",children:t})]})}},5680:function(e,t,n){"use strict";n.d(t,{default:function(){return c}});var r=n(7437);n(2265);var a=n(3847),s=n(4492),i=n(9555),o=n(3303),l=n(1930);function c(){(0,s.T_)("home");let e=(0,s.T_)("home.stats"),{data:t,error:n,isLoading:c}=(0,a.ZP)("dashboard-config",async()=>{try{console.log("[LiveDashboardGrid] Fetching dashboard data from Supabase...");let{data:e,error:t}=await o.O.from("config").select("*");if(t)throw console.warn("[LiveDashboardGrid] Supabase error, falling back to mock data:",t.message),t;return console.log("[LiveDashboardGrid] Data loaded successfully from Supabase:",null==e?void 0:e.length,"entities found"),e}catch(e){return console.warn("[LiveDashboardGrid] Fetch Error/Fallback:",e),l.l3.map(e=>({id:e.id,slug:e.slug,name:e.name,type:e.type,heatindex:e.heatIndex,trend:e.trend,stocksymbol:e.stockSymbol,tags:e.tags.join(","),summary:""}))}},{refreshInterval:3e4,revalidateOnFocus:!0,errorRetryCount:3,errorRetryInterval:5e3,onError:(e,t)=>{console.error("[LiveDashboardGrid] SWR Error:",e,{key:t})}});if(console.log("SWR 数据：",t),console.log("SWR 错误：",n),console.log("加载中：",c),c)return(0,r.jsx)("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(e=>(0,r.jsx)("div",{className:"h-64 rounded-2xl bg-white/5 animate-pulse border border-white/5"},e))});if(n)return(0,r.jsxs)("section",{className:"text-center p-8 bg-red-500/10 border border-red-500/20 rounded-2xl",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-red-400 mb-2",children:"Dashboard Data Error"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Failed to load live dashboard data. Please try again later."}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Error: ",n instanceof Error?n.message:"Unknown error"]})]});let d=(null==t?void 0:t.filter(e=>e.name&&e.slug))||[];return 0===d.length?(0,r.jsxs)("section",{className:"text-center p-8 bg-gray-800/50 border border-gray-700/50 rounded-2xl",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-400 mb-2",children:"No Entities Found"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No entities configured in Supabase."}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Check the Supabase config table or contact support."})]}):(0,r.jsx)("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.slice(0,4).map((t,n)=>{let a=t.heatindex?parseInt(t.heatindex):0,o=t.trend?parseFloat(t.trend):0,l=t.tags?t.tags.split(",").map(e=>e.trim()):[],c=t.type||"person";return(0,r.jsx)(s.rU,{href:"person"===c?"/person/".concat(t.slug):"/category/".concat(t.slug),className:"block h-full",children:(0,r.jsxs)(i.default,{delay:.1*n,className:"cursor-pointer h-full group",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded border ".concat("person"===c?"border-cyber-purple/50 text-cyber-purple":"border-cyber-green/50 text-cyber-green"),children:c.toUpperCase()}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-sm font-bold ".concat(o>=0?"text-cyber-green":"text-red-500"),children:[(0,r.jsx)("span",{children:o>=0?"▲":"▼"}),(0,r.jsxs)("span",{children:[Math.abs(o),"%"]})]})]}),(0,r.jsx)("h3",{className:"text-2xl font-bold mb-1 group-hover:text-cyber-neon transition-colors",children:t.name}),(0,r.jsxs)("div",{className:"flex items-end justify-between mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider",children:e("heatIndex")}),(0,r.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,r.jsx)("p",{className:"text-3xl font-mono text-cyber-neon drop-shadow-[0_0_8px_rgba(0,243,255,0.5)]",children:a}),(0,r.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-cyber-green animate-pulse mb-1",title:"Live Data"})]})]}),(0,r.jsx)("div",{className:"flex gap-1 flex-wrap justify-end max-w-[50%]",children:l.slice(0,2).map(e=>(0,r.jsx)("span",{className:"text-[10px] bg-white/5 px-2 py-0.5 rounded text-gray-400",children:e},e))})]})]})},t.slug)})})}},8503:function(e,t,n){"use strict";n.d(t,{default:function(){return d}});var r=n(7437),a=n(2265),s=n(3847),i=n(4492),o=n(9555),l=n(3303);let c=async(e,t)=>{if(!e||"#"===e||!e.startsWith("http"))return[];let n="&_t=".concat(Date.now());for(let r of["https://api.allorigins.win/raw?url=".concat(encodeURIComponent(e)).concat(n),"https://corsproxy.io/?".concat(encodeURIComponent(e)),"https://api.codetabs.com/v1/proxy?quest=".concat(encodeURIComponent(e))])try{let e=await fetch(r);if(!e.ok)continue;let n=await e.text();if(!n.includes("<rss")&&!n.includes("<feed")&&!n.includes("<item")&&!n.includes("<entry"))continue;let a=new DOMParser().parseFromString(n,"text/xml"),s=Array.from(a.querySelectorAll("item, entry")).slice(0,2);if(0===s.length)continue;return s.map(e=>{var n,r,a;let s=(null===(n=e.querySelector("title"))||void 0===n?void 0:n.textContent)||"No Title",i=e.querySelector("link"),o=(null==i?void 0:i.textContent)||(null==i?void 0:i.getAttribute("href"))||"#",l=null===(r=e.querySelector("pubDate, published, updated"))||void 0===r?void 0:r.textContent,c=(e=>{if(!e)return new Date;let t=new Date(e);if(!isNaN(t.getTime()))return t;let n=Date.parse(e);return isNaN(n)?new Date:new Date(n)})(l).toISOString();return{id:"rss-".concat(t,"-").concat(Math.random().toString(36).substr(2,9)),title:s,url:o,timestamp:c,summary:((null===(a=e.querySelector("description, summary, content"))||void 0===a?void 0:a.textContent)||"").replace(/<[^>]*>?/gm,"").substring(0,80)+"...",source:t,type:"rss"}})}catch(e){continue}return[]};function d(){let e=(0,i.T_)("home.dynamics"),{data:t}=(0,s.ZP)("global-config",async()=>{try{let{data:e,error:t}=await l.O.from("config").select("*");if(t)return console.warn("[LiveGlobalFeed] Failed to fetch config:",t),[];return console.log("[LiveGlobalFeed] Fetched",null==e?void 0:e.length,"config rows"),e}catch(e){return console.warn("[LiveGlobalFeed] Error fetching config:",e),[]}},{refreshInterval:12e4,revalidateOnFocus:!0}),{data:n,isLoading:d,mutate:u}=(0,s.ZP)("global-dynamics",async()=>{try{let{data:e,error:t}=await l.O.from("dynamics").select("*").order("pub_date",{ascending:!1}).limit(20);if(t)throw t;return console.log("[LiveGlobalFeed] Fetched",null==e?void 0:e.length,"items from dynamics table"),e}catch(e){return console.warn("[LiveGlobalFeed] Failed to fetch dynamics:",e),[]}},{refreshInterval:6e4,revalidateOnFocus:!0}),[m,p]=(0,a.useState)([]),[g,h]=(0,a.useState)(!0),[x,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{h(!0),b(!0);let e=[];if(n&&(e=[...e,...n.map(e=>({id:e.id,title:e.title,url:e.url||e.link||"#",timestamp:e.pub_date||e.created_at||new Date().toISOString(),summary:e.summary||e.content_snippet||"",source:e.source||"NexusPulse",type:"signal",sentiment:e.sentiment||"neutral"}))]),t&&t.length>0){let n=[];t.forEach(e=>{[e.rss,e.main_rss,e.google_news_rss,e.googlenewsrss,e.mainrss].forEach(t=>{t&&n.push(c(t,e.name||"Unknown"))})}),n.length>0&&(e=[...e,...(await Promise.all(n)).flat()])}e.sort((e,t)=>{let n=new Date(e.timestamp).getTime();return new Date(t.timestamp).getTime()-n}),console.log("[LiveGlobalFeed] Combined",(e=e.slice(0,20)).length,"items from all sources"),p(e),h(!1),b(!1)})()},[n,t,d]);let{mutate:f}=(0,s.ZP)("global-config"),y=async()=>{console.log("[LiveGlobalFeed] Manual refresh triggered"),h(!0),b(!0),await Promise.all([f(),u()]),await new Promise(e=>setTimeout(e,500)),h(!1),b(!1)};return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center px-2",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-gray-200",children:e("title")}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(g||d)&&(0,r.jsx)("span",{className:"text-xs text-cyber-neon animate-pulse",children:"Syncing..."}),(0,r.jsxs)("button",{onClick:y,className:"text-xs text-cyber-neon hover:underline flex items-center gap-1",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-3 h-3",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),"Refresh"]})]})]}),(0,r.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar",children:m.length>0?m.map((e,t)=>(0,r.jsxs)(o.default,{className:"!p-4 ".concat("manual"===e.type?"border-cyber-neon/40 bg-cyber-neon/5":""),delay:.05*t,children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("span",{className:"text-[10px] text-gray-500 font-mono",children:new Date(e.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),(0,r.jsx)("span",{className:"text-[10px] px-1.5 py-0.5 rounded border ".concat("manual"===e.type?"border-cyber-neon text-cyber-neon font-bold shadow-[0_0_5px_rgba(0,243,255,0.3)]":"signal"===e.type?"border-cyber-green text-cyber-green font-bold":"border-cyber-purple/30 text-cyber-purple"),children:"manual"===e.type?"BRIEFING":"signal"===e.type?"SIGNAL":e.source})]}),(0,r.jsx)("h4",{className:"text-sm font-bold text-gray-100 mb-1 leading-tight hover:text-cyber-neon cursor-pointer",children:"#"!==e.url?(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",children:e.title}):e.title}),(0,r.jsx)("p",{className:"text-xs text-gray-400 line-clamp-3 mb-2 leading-relaxed",children:e.summary}),"#"!==e.url&&(0,r.jsxs)("div",{className:"flex justify-between items-center text-[10px] text-gray-500",children:[(0,r.jsxs)("span",{children:["Via ","signal"===e.type?"Database":"RSS"]}),(0,r.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"hover:text-cyber-neon",children:"Read Source ↗"})]})]},e.id)):!g&&(0,r.jsxs)("div",{className:"p-4 text-center text-gray-500 text-sm",children:["Waiting for satellite uplink... ",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-xs opacity-50",children:"(Check Sheet Config)"})]})})]})}},1087:function(e,t,n){"use strict";n.d(t,{default:function(){return o}});var r=n(7437),a=n(4084),s=n(6705),i=n(1930);function o(e){let{data:t}=e,n=(0,i.aZ)();return(0,r.jsx)("div",{className:"h-[300px] w-full",children:(0,r.jsx)(s.x1,{options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{color:"#e2e8f0",font:{family:"Inter"}}},tooltip:{backgroundColor:"rgba(2, 6, 23, 0.9)",titleColor:"#00f3ff",bodyColor:"#fff",borderColor:"rgba(255, 255, 255, 0.1)",borderWidth:1,padding:10,displayColors:!1}},scales:{y:{grid:{color:"rgba(255, 255, 255, 0.05)"},ticks:{color:"#94a3b8"}},x:{grid:{display:!1},ticks:{color:"#94a3b8"}}}},data:n})})}a.kL.register(a.uw,a.f$,a.od,a.jn,a.Dx,a.u,a.De,a.Gu)},4492:function(e,t,n){"use strict";n.d(t,{T_:function(){return i},bU:function(){return o},jD:function(){return l},rU:function(){return d},tv:function(){return c}});var r=n(7437);n(2265);var a=n(1152);let s={en:{nav:{home:"Dashboard",insights:"Insights",enterprise:"Enterprise",login:"Login"},home:{hero:{title:"Real-Time Influence Tracker",subtitle:"Quantifying digital impact for investors and brands."},stats:{heatIndex:"Heat Index",trend:"24h Trend",ranking:"Global Ranking"},signals:{title:"Today's Signals",upgrade:"Upgrade for AI Analysis",teaser:"Musk satellite mention may lift auto stocks – Upgrade for full insight."},dynamics:{title:"Live Dynamics",viewAll:"View All"}},common:{loading:"Initializing Neural Link...",updated:"Last Updated",positive:"Positive",negative:"Negative",neutral:"Neutral"},entity:{heat:"Heat Index",trend:"Trend (24h)",news:"Latest Signals",back:"Back to Dashboard"}},zh:{nav:{home:"控制台",insights:"深度洞察",enterprise:"企业版",login:"登录"},home:{hero:{title:"实时影响力追踪系统",subtitle:"为投资者和品牌量化数字影响力与市场情绪。"},stats:{heatIndex:"热度指数",trend:"24小时趋势",ranking:"全球排名"},signals:{title:"今日投资信号",upgrade:"解锁AI分析",teaser:"马斯克关于卫星的言论可能提振汽车股 —— 升级以获取完整报告。"},dynamics:{title:"实时动态",viewAll:"查看全部"}},common:{loading:"正在初始化神经链接...",updated:"最后更新",positive:"利好",negative:"利空",neutral:"中性"},entity:{heat:"热度指数",trend:"趋势 (24h)",news:"最新信号",back:"返回控制台"}}};function i(e){let{locale:t}=(0,a.b)(),n=(e,t)=>t.split(".").reduce((e,t)=>e&&e[t],e);return r=>{let a="".concat(e,".").concat(r),i=n(s[t],a);return i||"common"!==e||(i=n(s[t],"common.".concat(r))),i||r}}function o(){let{locale:e}=(0,a.b)();return e}function l(){let{pathname:e}=(0,a.b)();return e}function c(){let{setPathname:e,setLocale:t}=(0,a.b)();return{push:t=>{e(t),window.scrollTo(0,0)},replace:(n,r)=>{(null==r?void 0:r.locale)&&t(r.locale),e(n)}}}function d(e){let{href:t,children:n,className:s}=e,{setPathname:i}=(0,a.b)();return(0,r.jsx)("a",{href:t,className:s,onClick:e=>{e.preventDefault(),i(t),window.scrollTo(0,0)},children:n})}},1930:function(e,t,n){"use strict";n.d(t,{V6:function(){return a},aZ:function(){return s},l3:function(){return r}});let r=[{id:"1",slug:"elon-musk",name:"Elon Musk",type:"person",heatIndex:98,trend:5.2,sentiment:"neutral",tags:["Tesla","SpaceX","X"],stockSymbol:"TSLA"},{id:"2",slug:"donald-trump",name:"Donald Trump",type:"person",heatIndex:95,trend:12.1,sentiment:"positive",tags:["Politics","Media","Real Estate"],stockSymbol:"DJT"},{id:"3",slug:"mark-zuckerberg",name:"Mark Zuckerberg",type:"person",heatIndex:88,trend:-1.5,sentiment:"neutral",tags:["Meta","VR","AI"],stockSymbol:"META"},{id:"4",slug:"ev-market",name:"Electric Vehicles",type:"category",heatIndex:92,trend:3.4,sentiment:"positive",tags:["Battery","China","Export"]},{id:"5",slug:"fast-fashion",name:"Fast Fashion",type:"category",heatIndex:85,trend:-.8,sentiment:"negative",tags:["Shein","Temu","Supply Chain"]}],a=[{id:"101",entityId:"1",title:"Starlink IPO Rumors Intensify",summary:"Market analysts predict a spinoff by Q4 2025, driving huge volume in space-tech ETFs.",source:"Bloomberg",timestamp:"2024-05-20T10:00:00Z",sentiment:"positive",url:"#"},{id:"102",entityId:"4",title:"EU Tariffs on Chinese EVs",summary:"New regulations may impact profit margins for outbound brands like BYD and Nio.",source:"Reuters",timestamp:"2024-05-20T09:30:00Z",sentiment:"negative",url:"#"},{id:"103",entityId:"2",title:"Trump Media Announces New Platform",summary:"Truth Social integration with crypto payments is being tested.",source:"TechCrunch",timestamp:"2024-05-19T14:00:00Z",sentiment:"positive",url:"#"},{id:"104",entityId:"5",title:"Supply Chain Audits Hit Fast Fashion",summary:"Major crackdown on sustainability claims affecting stock prices.",source:"Vogue Business",timestamp:"2024-05-19T11:15:00Z",sentiment:"negative",url:"#"}],s=()=>({labels:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],datasets:[{label:"Elon Musk",data:[85,88,87,92,95,94,98],borderColor:"#00f3ff",backgroundColor:"rgba(0, 243, 255, 0.1)",tension:.4},{label:"EV Market",data:[70,72,75,80,85,88,92],borderColor:"#bd00ff",backgroundColor:"rgba(189, 0, 255, 0.1)",tension:.4}]})},3303:function(e,t,n){"use strict";n.d(t,{O:function(){return o}});var r=n(3053),a=n(5566);let s=a.env.NEXT_PUBLIC_SUPABASE_URL||a.env.VITE_SUPABASE_URL,i=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||a.env.VITE_SUPABASE_KEY;s&&i||console.error("❌ Supabase environment variables not configured properly. Make sure NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY are set in .env.local.");let o=(0,r.eI)(s||"",i||"")},9441:function(e,t,n){"use strict";n.d(t,{default:function(){return s}});var r=n(8262),a=n(7437);function s(e){let{locale:t,...n}=e;if(!t)throw Error(void 0);return(0,a.jsx)(r.Pj,{locale:t,...n})}}},function(e){e.O(0,[674,905,590,430,971,117,744],function(){return e(e.s=314)}),_N_E=e.O()}]);